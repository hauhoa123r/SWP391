<!doctype html>
<html layout:decorate="~{/frontend/layouts/main-layout}"
      th:with="
        navActive = ${8},
        breadCrumbTitle = ${'Danh sách yêu thích'},
        breadCrumbTexts = ${{{'Danh sách yêu thích'}}},
        breadCrumbLinks = ${{{''}}}
"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      xmlns:th="http://www.thymeleaf.org"
      class="landing-pages" data-bs-theme="light" dir="ltr" lang="en">
<head>

    <title>Danh sách yêu thích</title>
    <!-- Giữ lại các thẻ meta/link/css cần thiết cho wishlist -->
</head>
<body class=" body-bg landing-pages">
<span class="screen-darken"></span>
<!-- loader Start -->
<div id="loading">
    <div class="loader simple-loader">
        <div class="loader-body">
            <img alt="loader" class="light-loader img-fluid " src="frontend/assets/images/loader.gif" width="200">
        </div>
    </div>
</div>
<!-- loader END -->
<main class="main-content" layout:fragment="content">
    <div class="wishlist-page section-padding">
        <div class="container">
            <!-- Add wishlist notification -->
            <div class="alert alert-success alert-dismissible fade show mb-4" role="alert" th:if="${wishlistMessage}">
                <span th:text="${wishlistMessage}"></span>
                <button aria-label="Close" class="btn-close" data-bs-dismiss="alert" type="button"></button>
            </div>
            <!-- Add sort, filter and search -->
            <form id="wishlistFilterForm" method="get" action="/wishlist">
                <div class="row mb-4">
                    <div class="col-md-4">
                        <input type="text" class="form-control" placeholder="Tìm kiếm..." name="searchQuery" th:value="${param.searchQuery}">
                    </div>
                    <div class="col-md-4">
                        <select class="form-select" name="sortBy" th:value="${param.sortBy}" onchange="this.form.submit()">
                            <option value="name_asc">Sắp xếp theo tên (A-Z)</option>
                            <option value="name_desc">Sắp xếp theo tên (Z-A)</option>
                            <option value="price_asc">Sắp xếp theo giá (Thấp-Cao)</option>
                            <option value="price_desc">Sắp xếp theo giá (Cao-Thấp)</option>
                        </select>
                    </div>
                    <div class="col-md-4">
                        <select class="form-select" name="filterStock" th:value="${param.filterStock}" onchange="this.form.submit()">
                            <option value="all">Tất cả sản phẩm</option>
                            <option value="in_stock">Còn hàng</option>
                        </select>
                    </div>
                </div>
            </form>
            <form id="wishlistForm" method="post" th:action="@{/wishlist/remove-selected}">
                <div class="table-responsive">
                    <table class="table cart-table">
                        <thead class="border-bottom">
                        <tr>
                            <th class="fw-bold fs-5 text-primary"><input type="checkbox" id="selectAll" onclick="toggleAll(this)" /></th>
                            <th class="fw-bold fs-5 text-primary">Sản phẩm</th>
                            <th class="fw-bold fs-5 text-primary">Giá</th>
                            <th class="fw-bold fs-5 text-primary">Số lượng tồn kho</th>
                            <th class="fw-bold fs-5 text-primary">Hành động</th>
                        </tr>
                        </thead>
                        <tbody th:each="item : ${items}" th:if="${items != null}">
                        <tr>
                            <td><input type="checkbox" name="selectedItems" th:value="${item.id}" class="item-checkbox" onchange="updateActionButtons()" /></td>
                            <td>
                                <div class="product-thumbnail">
                                    <a th:href="@{/product-standard(id=${item.id})}">
                                        <img alt="" class="avatar-80" th:src="${item.imageUrl}"/>
                                    </a>
                                    <span class="mt-2 text-primary" th:text="${item.name}"></span>
                                </div>
                            </td>
                            <td><span class="fs-5 fw-500" th:text="'$' + ${item.price}"></span></td>
                            <td><span class="fs-5" th:text="${item.stockQuantity} + ' in stock'"></span></td>
                            <td>
                                <a th:href="@{/checkout(productId=${item.id})}"><i class="fas fa-shopping-cart"></i></a>
                                <form method="post" th:action="@{/wishlist/remove}" style="display: inline;">
                                    <input type="hidden" name="productId" th:value="${item.id}" />
                                    <button class="btn btn-icon btn-danger btn-sm delete-btn bg-transparent text-primary border-0" type="submit">
                                        <span class="btn-inner fs-5"><i class="far fa-trash-alt"></i></span>
                                    </button>
                                </form>
                            </td>
                        </tr>
                        </tbody>
                    </table>
                </div>
                <div class="mt-3 d-flex justify-content-between" id="actionButtons" style="display: none;">
                    <button type="submit" class="btn btn-danger">Xóa đã chọn</button>
                    <div class="iq-btn-container">
                        <a th:href="@{/checkout}" class="iq-button text-capitalize d-inline-flex align-items-center gap-2 px-3">
                            <span class="iq-btn-text-holder position-relative">Thanh toán sản phẩm đã chọn</span>
                            <span class="iq-btn-icon-holder">
                                <svg xmlns="http://www.w3.org/2000/svg" width="10" height="10" viewBox="0 0 8 8" fill="none">
                                    <path d="M7.32046 4.70834H4.74952V7.25698C4.74952 7.66734 4.41395 8 4 8C3.58605 8 3.25048 7.66734 3.25048 7.25698V4.70834H0.679545C0.293423 4.6687 0 4.34614 0 3.96132C0 3.5765 0.293423 3.25394 0.679545 3.21431H3.24242V0.673653C3.28241 0.290878 3.60778 0 3.99597 0C4.38416 0 4.70954 0.290878 4.74952 0.673653V3.21431H7.32046C7.70658 3.25394 8 3.5765 8 3.96132C8 4.34614 7.70658 4.6687 7.32046 4.70834Z" fill="currentColor"></path>
                                </svg>
                            </span>
                        </a>
                    </div>
                </div>
            </form>
            <div class="product-social-share mt-5">
                <h5 class="mb-3">Chia sẻ:</h5>
                <ul class="list-inline m-0 p-0 d-flex flex-wrap align-items-center gap-2">
                    <li class="flex-shrink-0">
                        <a class="d-inline-block border-radius rounded-circle bg-primary text-white text-center"
                           href="https://www.facebook.com/"
                           target="_blank">
                            <i class="fab fa-facebook-f"></i>
                        </a>
                    </li>
                    <li class="flex-shrink-0">
                        <a class="d-inline-block border-radius rounded-circle bg-info text-white text-center"
                           href="https://x.com/"
                           target="_blank">
                            <i class="fab fa-twitter"></i>
                        </a>
                    </li>
                    <li class="flex-shrink-0">
                        <a class="d-inline-block border-radius rounded-circle bg-danger text-white text-center"
                           href="https://in.pinterest.com/"
                           target="_blank">
                            <i class="fab fa-pinterest-p"></i>
                        </a>
                    </li>
                    <li class="flex-shrink-0">
                        <a class="d-inline-block border-radius rounded-circle bg-warning text-white text-center"
                           href="https://iqonic.design/"
                           target="_blank">
                            <i class="far fa-envelope"></i>
                        </a>
                    </li>
                    <li class="flex-shrink-0">
                        <a class="d-inline-block border-radius rounded-circle bg-success text-white text-center"
                           href="https://www.whatsapp.com/"
                           target="_blank">
                            <i class="fab fa-whatsapp"></i>
                        </a>
                    </li>
                </ul>
            </div>
        </div>
    </div>

</main>
<!-- Wrapper End -->
<!-- Footer start -->
<footer>
    <div class="bg-primary-subtle footer-top text-body inner-box ">
        <div class="container">
            <div class="row">
                <div class="col-lg-4 col-md-6 mb-5 mb-lg-0">
                    <div class="pe-lg-5">
                        <a class="navbar-brand m-0" href="./index.html">
                                     <span class="logo-normal">
                                        <img alt="logo" class="img-fluid" loading="lazy"
                                             src="frontend/assets/images/logo/logo.png">
                                     </span>
                        </a>
                        <h5 class="iq-heading-title mt-5">Tin tức</h5>
                        <p class=" mt-2 mb-4">Đây là một thực tế đã được thiết lập từ lâu rằng một người đọc sẽ bị phân tâm bởi nội dung có thể đọc được của một trang khi nhìn vào bố cục của trang.</p>
                        <div class="custom-form-field pe-sm-5 me-sm-5">
                            <div class="pe-sm-3 pe-5">
                                <div class="custom-form-field">
                                    <form class="mail-box position-relative">
                                        <input class="form-control bg-white" name="EMAIL" placeholder="Nhập email của bạn"
                                               required="" type="email">
                                        <button class="btn-submit position-absolute bg-primary border-0 rounded-0 text-white"
                                                type="submit"
                                                value="Sign up">
                                            <svg fill="none" height="14" viewBox="0 0 18 18" width="14"
                                                 xmlns="http://www.w3.org/2000/svg">
                                                <mask height="19" maskUnits="userSpaceOnUse" style="mask-type:alpha"
                                                      width="18"
                                                      x="0" y="0">
                                                    <path clip-rule="evenodd"
                                                          d="M0 0.000366211H18V18.0004H0V0.000366211Z"
                                                          fill="currentColor"
                                                          fill-rule="evenodd"></path>
                                                  </mask>
                                                  <g>
                                                      <path clip-rule="evenodd"
                                                            d="M8.12802 10.9092L11.5039 16.3861C11.6516 16.6261 11.8824 16.6234 11.9756 16.6104C12.0688 16.5975 12.2932 16.5403 12.3744 16.268L16.5958 2.0103C16.6697 1.75829 16.534 1.58659 16.4731 1.52566C16.414 1.46474 16.2451 1.33458 16.0004 1.40381L1.73262 5.58187C1.46214 5.66126 1.40306 5.88835 1.39014 5.98158C1.37722 6.07667 1.37352 6.31206 1.61261 6.46253L7.15228 9.92702L12.0467 4.98092C12.3153 4.70952 12.7538 4.70675 13.0261 4.97538C13.2984 5.24401 13.3003 5.68341 13.0317 5.95481L8.12802 10.9092ZM11.9036 18.0007C11.2611 18.0007 10.6722 17.6739 10.3251 17.1127L6.74614 11.3053L0.878763 7.63589C0.246423 7.23987 -0.0840551 6.5346 0.0184117 5.79334C0.119955 5.05207 0.628597 4.46311 1.34309 4.25356L15.6109 0.0755041C16.2672 -0.116506 16.9707 0.0653497 17.4544 0.547221C17.9381 1.03371 18.1181 1.74451 17.9224 2.40362L13.701 16.6604C13.4896 17.3776 12.8988 17.8844 12.1593 17.9832C12.0726 17.9943 11.9886 18.0007 11.9036 18.0007V18.0007ZM19.9526 26.1246C16.8376 26.1246 12.7764 23.6446 7.8801 18.7508C2.96511 13.8371 0.481355 9.76333 0.500105 6.64208C0.511355 4.57958 1.59261 3.52333 1.99886 3.12708C2.02011 3.10083 2.09261 3.02958 2.11761 3.00458C3.9101 1.21083 5.11885 0.485831 6.32135 0.499581C7.7176 0.518331 8.71135 1.56333 9.96885 2.88708C10.2801 3.21458 10.6176 3.57083 10.9939 3.94583C12.8189 5.77083 12.2989 7.25958 11.8814 8.45458C11.4264 9.75833 11.0326 10.8833 13.3901 13.2408C15.7501 15.5983 16.8751 15.2046 18.1739 14.7458C19.3701 14.3283 20.8551 13.8058 22.6826 15.6308C23.0526 16.0008 23.4039 16.3346 23.7276 16.6433C25.0576 17.9071 26.1076 18.9058 26.1251 20.3058C26.1401 21.4996 25.4151 22.7158 23.6251 24.5071L22.8326 23.9696L23.5026 24.6246C23.1064 25.0308 22.0514 26.1133 19.9876 26.1246H19.9526ZM11.9036 18.0007C11.2611 18.0007 10.6722 17.6739 10.3251 17.1127L6.74614 11.3053L0.878763 7.63589C0.246423 7.23987 -0.0840551 6.5346 0.0184117 5.79334C0.119955 5.05207 0.628597 4.46311 1.34309 4.25356L15.6109 0.0755041C16.2672 -0.116506 16.9707 0.0653497 17.4544 0.547221C17.9381 1.03371 18.1181 1.74451 17.9224 2.40362L13.701 16.6604C13.4896 17.3776 12.8988 17.8844 12.1593 17.9832C12.0726 17.9943 11.9886 18.0007 11.9036 18.0007V18.0007ZM19.9526 26.1246C16.8376 26.1246 12.7764 23.6446 7.8801 18.7508C2.96511 13.8371 0.481355 9.76333 0.500105 6.64208C0.511355 4.57958 1.59261 3.52333 1.99886 3.12708C2.02011 3.10083 2.09261 3.02958 2.11761 3.00458C3.9101 1.21083 5.11885 0.485831 6.32135 0.499581C7.7176 0.518331 8.71135 1.56333 9.96885 2.88708C10.2801 3.21458 10.6176 3.57083 10.9939 3.94583C12.8189 5.77083 12.2989 7.25958 11.8814 8.45458C11.4264 9.75833 11.0326 10.8833 13.3901 13.2408C15.7501 15.5983 16.8751 15.2046 18.1739 14.7458C19.3701 14.3283 20.8551 13.8058 22.6826 15.6308C23.0526 16.0008 23.4039 16.3346 23.7276 16.6433C25.0576 17.9071 26.1076 18.9058 26.1251 20.3058C26.1401 21.4996 25.4151 22.7158 23.6251 24.5071L22.8326 23.9696L23.5026 24.6246C23.1064 25.0308 22.0514 26.1133 19.9876 26.1246H19.9526ZM11.9036 18.0007C5.66 18.0007 1.875 14.1963 1.875 9.29125C1.875 5.16125 4.62625 1.5 10.3125 1.5C15.9987 1.5 20.625 5.16125 20.625 9.29125C20.625 14.1963 16.965 18.0007 11.9036 18.0007ZM11.9036 24.875C8.07 24.875 0 17.935 0 10.2912C0 5.16125 4.62625 0.5 10.3125 0.5C15.9987 0.5 20.625 5.16125 20.625 10.2912C20.625 17.935 12.555 24.875 11.9036 24.875Z"
                                                    fill="currentColor"
                                                    fill-rule="evenodd"></path>
                                                  </g>
                                              </svg>
                                          </span>
                                <span class="text-body">+0123456789</span>
                            </a>
                        </li>
                        <li class="mb-3">
                            <a class="d-flex gap-3" href="mailto:support@example.com">
                                          <span class="text-primary">
                                              <svg class="icon-20" fill="none"
                                                   viewBox="0 0 28 25"
                                                   xmlns="http://www.w3.org/2000/svg">
                                                  <path clip-rule="evenodd"
                                                        d="M13.7217 14.831C12.8854 14.831 12.0516 14.5547 11.3541 14.0022L5.7479 9.48224C5.34415 9.15724 5.28165 8.56599 5.6054 8.16349C5.93165 7.76224 6.52165 7.69849 6.92415 8.02224L12.5254 12.5372C13.2292 13.0947 14.2204 13.0947 14.9291 12.5322L20.4741 8.02474C20.8766 7.69599 21.4667 7.75849 21.7941 8.16099C22.1204 8.56224 22.0592 9.15224 21.6579 9.47974L16.1029 13.9947C15.4004 14.5522 14.5604 14.831 13.7217 14.831ZM10.3125 14.875C8.0725 14.875 6.25 13.0538 6.25 10.8137C6.25 8.5725 8.0725 6.75 10.3125 6.75C12.5525 6.75 14.375 8.5725 14.375 10.8137C14.375 13.0538 12.5525 14.875 10.3125 14.875Z"
                                                        fill="currentColor"
                                                        fill-rule="evenodd"></path>
                                                  <mask height="25" maskUnits="userSpaceOnUse" style="mask-type:alpha"
                                                        width="28"
                                                        x="0"
                                                        y="0">
                                                      <path clip-rule="evenodd" d="M0 0.5H27.6244V24.875H0V0.5Z"
                                                            fill="white"
                                                            fill-rule="evenodd">
                                                  </path>
                                                  </mask>
                                                  <g>
                                                      <path clip-rule="evenodd"
                                                            d="M10.3125 2.375C5.66 2.375 1.875 6.19625 1.875 10.8912C1.875 16.865 8.905 22.685 10.3125 22.995C11.72 22.6837 18.75 16.8637 18.75 10.8912C18.75 6.19625 14.965 2.375 10.3125 2.375ZM10.3125 24.875C8.07 24.875 0 17.935 0 10.2912C0 5.16125 4.62625 0.5 10.3125 0.5C15.9987 0.5 20.625 5.16125 20.625 10.2912C20.625 17.935 12.555 24.875 10.3125 24.875Z"
                                                            fill="currentColor"
                                                            fill-rule="evenodd"></path>
                                                  </g>
                                              </svg>
                                          </span>
                                <span class="text-body">support@example.com</span>
                            </a>
                        </li>
                        <li class="d-flex gap-3">
          
                                      <span class="text-primary">
                                          <svg class="icon-20" fill="none" viewBox="0 0 21 25"
                                               xmlns="http://www.w3.org/2000/svg">
                                              <path clip-rule="evenodd"
                                                    d="M3.44886 4.32583C3.45136 4.32583 3.38886 4.39083 3.31011 4.46833C3.00761 4.76208 2.38136 5.37333 2.37511 6.65208C2.36511 8.44083 3.54136 11.7621 9.2051 17.4246C14.8426 23.0596 18.1589 24.2496 19.9514 24.2496H19.9776C21.2564 24.2433 21.8664 23.6158 22.1614 23.3146C22.2514 23.2221 22.3239 23.1546 22.3751 23.1121C23.6201 21.8596 24.2576 20.9271 24.2514 20.3296C24.2426 19.7196 23.4839 18.9983 22.4351 18.0008C22.1014 17.6833 21.7389 17.3383 21.3564 16.9558C20.3651 15.9671 19.8739 16.1358 18.7939 16.5158C17.3001 17.0396 15.2501 17.7521 12.0651 14.5658C8.8751 11.3783 9.58885 9.33083 10.1114 7.83708C10.4889 6.75708 10.6614 6.26458 9.66886 5.27208C9.28011 4.88458 8.93136 4.51708 8.61011 4.17958C7.61886 3.13708 6.90386 2.38333 6.29761 2.37458H6.28761C5.68886 2.37458 4.75886 3.01458 3.44261 4.33083C3.44636 4.32708 3.44761 4.32583 3.44886 4.32583ZM19.9526 26.1246C16.8376 26.1246 12.7764 23.6446 7.8801 18.7508C2.96511 13.8371 0.481355 9.76333 0.500105 6.64208C0.511355 4.57958 1.59261 3.52333 1.99886 3.12708C2.02011 3.10083 2.09261 3.02958 2.11761 3.00458C3.9101 1.21083 5.11885 0.485831 6.32135 0.499581C7.7176 0.518331 8.71135 1.56333 9.96885 2.88708C10.2801 3.21458 10.6176 3.57083 10.9939 3.94583C12.8189 5.77083 12.2989 7.25958 11.8814 8.45458C11.4264 9.75833 11.0326 10.8833 13.3901 13.2408C15.7501 15.5983 16.8751 15.2046 18.1739 14.7458C19.3701 14.3283 20.8551 13.8058 22.6826 15.6308C23.0526 16.0008 23.4039 16.3346 23.7276 16.6433C25.0576 17.9071 26.1076 18.9058 26.1251 20.3058C26.1401 21.4996 25.4151 22.7158 23.6251 24.5071L22.8326 23.9696L23.5026 24.6246C23.1064 25.0308 22.0514 26.1133 19.9876 26.1246H19.9526ZM11.9036 18.0007C11.2611 18.0007 10.6722 17.6739 10.3251 17.1127L6.74614 11.3053L0.878763 7.63589C0.246423 7.23987 -0.0840551 6.5346 0.0184117 5.79334C0.119955 5.05207 0.628597 4.46311 1.34309 4.25356L15.6109 0.0755041C16.2672 -0.116506 16.9707 0.0653497 17.4544 0.547221C17.9381 1.03371 18.1181 1.74451 17.9224 2.40362L13.701 16.6604C13.4896 17.3776 12.8988 17.8844 12.1593 17.9832C12.0726 17.9943 11.9886 18.0007 11.9036 18.0007V18.0007ZM19.9526 26.1246C16.8376 26.1246 12.7764 23.6446 7.8801 18.7508C2.96511 13.8371 0.481355 9.76333 0.500105 6.64208C0.511355 4.57958 1.59261 3.52333 1.99886 3.12708C2.02011 3.10083 2.09261 3.02958 2.11761 3.00458C3.9101 1.21083 5.11885 0.485831 6.32135 0.499581C7.7176 0.518331 8.71135 1.56333 9.96885 2.88708C10.2801 3.21458 10.6176 3.57083 10.9939 3.94583C12.8189 5.77083 12.2989 7.25958 11.8814 8.45458C11.4264 9.75833 11.0326 10.8833 13.3901 13.2408C15.7501 15.5983 16.8751 15.2046 18.1739 14.7458C19.3701 14.3283 20.8551 13.8058 22.6826 15.6308C23.0526 16.0008 23.4039 16.3346 23.7276 16.6433C25.0576 17.9071 26.1076 18.9058 26.1251 20.3058C26.1401 21.4996 25.4151 22.7158 23.6251 24.5071L22.8326 23.9696L23.5026 24.6246C23.1064 25.0308 22.0514 26.1133 19.9876 26.1246H19.9526ZM11.9036 18.0007C5.66 18.0007 1.875 14.1963 1.875 9.29125C1.875 5.16125 4.62625 1.5 10.3125 1.5C15.9987 1.5 20.625 5.16125 20.625 9.29125C20.625 14.1963 16.965 18.0007 11.9036 18.0007ZM11.9036 24.875C8.07 24.875 0 17.935 0 10.2912C0 5.16125 4.62625 0.5 10.3125 0.5C15.9987 0.5 20.625 5.16125 20.625 10.2912C20.625 17.935 12.555 24.875 11.9036 24.875Z"
                                                    fill="currentColor"
                                                    fill-rule="evenodd"></path>
                                                  </g>
                                              </svg>
                                          </span>
                            <span>1234, Đại Lộ Bắc Luke Lane, South Bend, IN 360001</span>
                        </li>
                    </ul>
                    <ul class="iq-social list-inline d-flex align-items-center mt-5 gap-3 m-0">
                        <li class="label text-dark fw-500">Theo dõi chúng tôi :</li>
                        <li>
                            <a href="https://facebook.com/">
                                <svg class="base-circle animated" height="38" viewBox="0 0 50 50" width="38">
                                    <circle class="c1" cx="25" cy="25" fill="none" r="23" stroke="#6e7990"
                                            stroke-width="1"></circle>
                                </svg>
                                <i class="fab fa-facebook-f"></i>
                            </a>
                        </li>
                        <li>
                            <a href="https://x.com/">
                                <svg class="base-circle animated" height="38" viewBox="0 0 50 50" width="38">
                                    <circle class="c1" cx="25" cy="25" fill="none" r="23" stroke="#6e7990"
                                            stroke-width="1"></circle>
                                </svg>
                                <i class="fab fa-twitter"></i>
                            </a>
                        </li>
                        <li>
                            <a href="https://www.google.com/">
                                <svg class="base-circle animated" height="38" viewBox="0 0 50 50" width="38">
                                    <circle class="c1" cx="25" cy="25" fill="none" r="23" stroke="#6e7990"
                                            stroke-width="1"></circle>
                                </svg>
                                <i class="fab fa-google"></i>
                            </a>
                        </li>
                    </ul>
                </div>
            </div>
        </div>
    </div>
    <div class="footer-bottom bg-primary-subtle border-top text-body">
        <div class="container py-4">
            <div class="text-center ">
                <p class="mb-0"> 
                    <script>document.write(new Date().getFullYear());</script>
                    KiviCare, Tất cả quyền được bảo lưu.
                </p>
            </div>
        </div>
    </div>
</footer>    <!-- footer end -->

<!-- setting -->
<div class="rtl-box">
    <a aria-controls="live-customizer" class="btn btn-icon btn-setting bg-primary" data-bs-target="#live-customizer"
       data-bs-toggle="offcanvas" id="settingbutton" role="button">
        <svg fill="white" height="1.875em" viewBox="0 0 20 20" width="1.875em" xmlns="http://www.w3.org/2000/svg">
            <path clip-rule="evenodd"
                  d="M11.49 3.17c-.38-1.56-2.6-1.56-2.98 0a1.532 1.532 0 01-2.286.948c-1.372-.836-2.942.734-2.106 2.106.54.886.061 2.042-.947 2.287-1.561.379-1.561 2.6 0 2.978a1.532 1.532 0 01.947 2.287c-.836 1.372.734 2.942 2.106 2.106a1.532 1.532 0 012.287.947c.379 1.561 2.6 1.561 2.978 0a1.533 1.533 0 012.287-.947c1.372.836 2.942-.734 2.106-2.106a1.533 1.533 0 01.947-2.287c1.561-.379 1.561-2.6 0-2.978a1.532 1.532 0 01-.947-2.287c.836-1.372-.734-2.942-2.106-2.106a1.532 1.532 0 01-2.287-.947zM10 13a3 3 0 100-6 3 3 0 000 6z"
                  fill-rule="evenodd"/>
        </svg>
    </a>
    <div aria-labelledby="live-customizer-label" aria-modal="true"
         class="offcanvas offcanvas-end live-customizer on-rtl end"
         data-bs-backdrop="false" data-bs-scroll="true" id="live-customizer" role="dialog"
         tabindex="-1">
        <div class="offcanvas-header gap-3 pb-2">
            <div class="d-flex align-items-center">
                <h5 class="offcanvas-title" id="live-customizer-label">Chế độ ngôn ngữ</h5>
            </div>
            <div class="d-flex gap-1 align-items-center">
                <button aria-label="Reset All Settings" class="btn btn-icon text-primary border-0"
                        data-bs-original-title="Reset All Settings"
                        data-bs-placement="left" data-bs-toggle="tooltip"
                        data-reset="settings">
                    <span class="btn-inner">
                        <i class="fas fa-sync-alt"></i>
                    </span>
                </button>
                <button aria-label="Close" class="btn btn-icon btn-close px-0 shadow-none" data-bs-dismiss="offcanvas"
                        type="button">
                    <i class="fas fa-times"></i>
                </button>
            </div>
        </div>
        <div class="offcanvas-body pt-0">
            <div class="modes row row-cols-2 gx-2">
                <div class="col">
                    <div class="text-center w-100" data-setting="attribute">
                        <input checked class="btn-check" data-prop="dir" id="theme-scheme-direction-ltr"
                               name="theme_scheme_direction"
                               type="radio" value="ltr">
                        <label class="btn dir-btn cutomizer-button w-100" for="theme-scheme-direction-ltr">
                            LTR
                        </label>
                    </div>
                </div>
                <div class="col">
                    <div class="text-center w-100" data-setting="attribute">
                        <input class="btn-check" data-prop="dir" id="theme-scheme-direction-rtl"
                               name="theme_scheme_direction" type="radio"
                               value="rtl">
                        <label class="btn dir-btn cutomizer-button w-100" for="theme-scheme-direction-rtl">
                            RTL
                        </label>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>    <!-- setting -->

<!-- Back To Top -->
<div id="back-to-top" style="display: none;">
    <a class="p-0 btn btn-sm position-fixed top border-0 text-white" href="#top" id="top">
        <svg fill="none" viewBox="0 0 24 24" width="30" xmlns="http://www.w3.org/2000/svg">
            <path d="M5 15.5L12 8.5L19 15.5" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"
                  stroke-width="1.5"></path>
        </svg>
    </a>
</div>
<!-- Back To Top -->

<!-- Library Bundle Script -->
<script src="frontend/assets/js/core/libs.min.js"></script>
<!-- Plugin Scripts -->

<!-- Slider-tab Script -->
<script src="frontend/assets/js/plugins/slider-tabs.js"></script>

<!-- fslightbox Script -->
<script defer src="frontend/assets/js/plugins/fslightbox.js"></script>

<!-- Sweet-alert Script -->
<script async src="frontend/assets/vendor/sweetalert2/dist/sweetalert2.min.js"></script>
<script defer src="frontend/assets/js/plugins/sweet-alert.js"></script>


<!-- Lodash Utility -->
<script src="frontend/assets/vendor/lodash/lodash.min.js"></script>
<!-- Utilities Functions -->
<script src="frontend/assets/js/iqonic-script/utility.min.js"></script>
<!-- Settings Script -->
<script src="frontend/assets/js/iqonic-script/setting.min.js"></script>
<!-- Settings Init Script -->
<script src="frontend/assets/js/iqonic-script/setting-init.js"></script>
<!-- External Library Bundle Script -->
<script src="frontend/assets/js/core/external.min.js"></script>
<!-- Kivicare Script -->
<script defer src="frontend/assets/js/kivicare.js?v=1.4.1"></script>
<script defer src="frontend/assets/js/kivicare-advance.js?v=1.4.1"></script>
<!-- Kivicare Pages Script -->
<script defer src="frontend/assets/js/slider.js"></script>
<script defer src="frontend/assets/js/scroll-text.js"></script>
<script src="frontend/assets/js/customizer.js"></script>
<script src="frontend/assets/js/mouse-move.js"></script>
<script src="frontend/assets/js/fslightbox.js"></script>
<script src="frontend/assets/js/setting.js"></script>
<!-- helpdesk.js removed - file not found -->

<!-- Add confirmation dialog for wishlist delete -->
<script>
    document.addEventListener("DOMContentLoaded", function () {
        console.log("Delete confirmation script loaded");

        // Removed unnecessary delete confirmation script
    });
</script>
<script>
    function toggleAll(source) {
        const checkboxes = document.getElementsByClassName('item-checkbox');
        for (let i = 0; i < checkboxes.length; i++) {
            checkboxes[i].checked = source.checked;
        }
        updateActionButtons();
    }

    function updateActionButtons() {
        const checkboxes = document.getElementsByClassName('item-checkbox');
        let checkedCount = 0;
        for (let i = 0; i < checkboxes.length; i++) {
            if (checkboxes[i].checked) {
                checkedCount++;
            }
        }
        document.getElementById('actionButtons').style.display = checkedCount > 1 ? 'flex' : 'none';
    }
</script>
<script>
    document.addEventListener("DOMContentLoaded", function () {
        console.log("Wishlist script loaded");

        // Xử lý chọn tất cả
        window.toggleAll = function(source) {
            let checkboxes = document.getElementsByName('selectedItems');
            for(let i = 0; i < checkboxes.length; i++) {
                checkboxes[i].checked = source.checked;
            }
            updateActionButtons();
        };

        // Cập nhật hiển thị nút hành động
        window.updateActionButtons = function() {
            let checkboxes = document.getElementsByName('selectedItems');
            let actionButtons = document.getElementById('actionButtons');
            let checkedCount = Array.from(checkboxes).filter(cb => cb.checked).length;
            
            if (checkedCount > 1) {
                actionButtons.style.display = 'flex';
            } else {
                actionButtons.style.display = 'none';
            }
        };

        // Xác nhận xóa sản phẩm riêng lẻ
        window.confirmDelete = function(button) {
            let productId = button.getAttribute('data-id');
            let productName = button.getAttribute('data-name');
            
            Swal.fire({
                title: 'Xác nhận xóa',
                text: `Bạn có chắc chắn muốn xóa ${productName} khỏi danh sách yêu thích?`,
                icon: 'warning',
                showCancelButton: true,
                confirmButtonText: 'Xóa',
                cancelButtonText: 'Hủy'
            }).then((result) => {
                if (result.isConfirmed) {
                    let form = document.createElement('form');
                    form.method = 'POST';
                    form.action = '/wishlist/remove';
                    
                    let input = document.createElement('input');
                    input.type = 'hidden';
                    input.name = 'productId';
                    input.value = productId;
                    form.appendChild(input);
                    
                    document.body.appendChild(form);
                    form.submit();
                }
            });
        };

        // Xử lý tìm kiếm, sắp xếp và lọc
        const searchInput = document.querySelector('input[name="searchQuery"]');
        const sortSelect = document.querySelector('select[name="sortBy"]');
        const filterSelect = document.querySelector('select[name="filterStock"]');
        
        function applyFilters() {
            let search = searchInput.value;
            let sort = sortSelect.value;
            let filter = filterSelect.value;
            
            let url = window.location.pathname;
            let params = new URLSearchParams(window.location.search);
            params.set('search', search);
            params.set('sort', sort);
            params.set('filter', filter);
            
            window.location.href = url + '?' + params.toString();
        }
        
        searchInput.addEventListener('input', function() {
            applyFilters();
        });
        
        sortSelect.addEventListener('change', function() {
            applyFilters();
        });
        
        filterSelect.addEventListener('change', function() {
            applyFilters();
        });
    });
</script>

</body>
</html>
