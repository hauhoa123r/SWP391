<!DOCTYPE html>
<html lang="en" dir="ltr" >

<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description"
          content="Kivicare admin is super flexible, powerful, clean &amp; modern responsive bootstrap 5 admin template with unlimited possibilities.">
    <meta name="keywords"
          content="admin template, Kivicare admin template, dashboard template, flat admin template, responsive admin template, web app">
    <meta name="author" content="pixelstrap">
    <link rel="icon" th:href="@{/templates_storage/assets/images/favicon.png}" type="image/x-icon">
    <link rel="shortcut icon" th:href="@{/templates_storage/assets/images/favicon.png}" type="image/x-icon">
    <title>Kivicare - Coupon List</title>

    <!-- Google font-->
    <link
            href="https://fonts.googleapis.com/css2?family=Public+Sans:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,100;1,200;1,300;1,400;1,500;1,600;1,700;1,800;1,900&display=swap"
            rel="stylesheet">

    <!-- Fontawesome css -->
    <link rel="stylesheet" type="text/css" th:href="@{/templates_storage/assets/css/vendors/font-awesome.css}">

    <!-- Linear Icon css -->
    <link rel="stylesheet" th:href="@{/templates_storage/assets/css/linearicon.css}">

    <!-- remixicon css -->
    <link rel="stylesheet" type="text/css" th:href="@{/templates_storage/assets/css/remixicon.css}">

    <!-- Themify icon css-->
    <link rel="stylesheet" type="text/css" th:href="@{/templates_storage/assets/css/vendors/themify.css}">

    <!-- Data Table css -->
    <link rel="stylesheet" type="text/css" th:href="@{/templates_storage/assets/css/datatables.css}">

    <!-- Feather icon css -->
    <link rel="stylesheet" type="text/css" th:href="@{/templates_storage/assets/css/vendors/feather-icon.css}">

    <!-- Plugins css -->
    <link rel="stylesheet" type="text/css" th:href="@{/templates_storage/assets/css/vendors/scrollbar.css}">
    <link rel="stylesheet" type="text/css" th:href="@{/templates_storage/assets/css/vendors/animate.css}">

    <!-- Custom CSS -->
    <style>
        .warehouse-logo {
            font-family: 'Public Sans', sans-serif;
            font-weight: 700;
            font-size: 28px;
            color: #2e8b57; /* Màu xanh lá cây */
            text-align: center;
            margin: 0;
            letter-spacing: 0.5px;
        }
        
        .page-wrapper.compact-wrapper .page-body-wrapper {
            padding-right: 0 !important;
        }
        .page-body {
            margin-right: 0 !important;
            padding-right: 0 !important;
        }
        .container-fluid {
            padding-right: 0 !important;
        }

        .logout-confirmation {
            display: none; /* Hidden by default */
            padding: 15px;
            background: #fff;
            border: 1px solid #ccc;
            text-align: center;
        }
        .logout-confirmation.show {
            display: block; /* Show when class 'show' is added */
        }

        .coupon-confirmation {
            display: none;
            padding: 15px;
            background: #fff;
            border: 1px solid #ccc;
            text-align: center;
            margin-top: 10px;
        }
        .coupon-confirmation.show {
            display: block;
        }

        /* Thêm vào phần <style> hiện có */
        .pagination {
            display: flex;
            padding-left: 0;
            list-style: none;
        }

        .page-item:not(:first-child) .page-link {
            margin-left: 5px;
        }

        .page-link {
            position: relative;
            display: block;
            padding: 0.5rem 0.75rem;
            color: #7638ff;
            background-color: #fff;
            border: 1px solid #dee2e6;
            border-radius: 0.25rem;
        }

        .page-link:hover {
            color: #5924d4;
            background-color: #e9ecef;
            border-color: #dee2e6;
        }

        .page-item.active .page-link {
            z-index: 3;
            color: #fff;
            background-color: #7638ff;
            border-color: #7638ff;
        }

        .page-item.disabled .page-link {
            color: #6c757d;
            pointer-events: none;
            background-color: #fff;
            border-color: #dee2e6;
        }

        .pagination-section {
            display: flex;
            justify-content: center;
        }

        /* Styles cho bộ lọc */
        .search-box-filter {
            background-color: #f9f9f9;
            border-radius: 10px;
            padding: 25px;
            margin-bottom: 25px;
            box-shadow: 0 2px 15px rgba(0, 0, 0, 0.05);
            border: 1px solid #eee;
        }
        
        .search-box-filter .form-label {
            font-weight: 500;
            margin-bottom: 10px;
            color: #2c323f;
            font-size: 14px;
        }
        
        .search-box-filter .form-control, 
        .search-box-filter .form-select {
            border-radius: 5px;
            border: 1px solid #e6e6e6;
            padding: 10px 15px;
            font-size: 14px;
            height: auto;
            box-shadow: none;
            transition: all 0.3s;
            background-color: #fff;
        }
        
        .search-box-filter .form-control:focus, 
        .search-box-filter .form-select:focus {
            border-color: var(--theme-color);
            box-shadow: 0 0 0 0.2rem rgba(13, 164, 135, 0.15);
        }
        
        .search-box-filter .btn-solid {
            height: 100%;
            width: 100%;
            border-radius: 5px;
            font-weight: 500;
            padding: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        /* Style cho phân trang */
        .pagination-section {
            display: flex;
            justify-content: center;
            margin-top: 20px;
        }
        
        .pagination {
            display: flex;
            padding-left: 0;
            list-style: none;
            border-radius: 0.25rem;
            margin-bottom: 0;
        }
        
        .page-item {
            margin: 0 3px;
        }
        
        .page-item.active .page-link {
            background-color: var(--theme-color);
            border-color: var(--theme-color);
            color: #fff;
            z-index: 3;
        }
        
        .page-item.disabled .page-link {
            color: #6c757d;
            pointer-events: none;
            cursor: not-allowed;
            background-color: #fff;
            border-color: #dee2e6;
        }
        
        .page-link {
            position: relative;
            display: block;
            padding: 0.5rem 0.75rem;
            margin-left: -1px;
            line-height: 1.25;
            color: var(--theme-color);
            background-color: #fff;
            border: 1px solid #dee2e6;
            border-radius: 4px;
        }
        
        .page-link:hover {
            z-index: 2;
            color: #0a8c72;
            text-decoration: none;
            background-color: #e9ecef;
            border-color: #dee2e6;
        }
        
        /* Style cho bảng */
        .table-responsive {
            border-radius: 8px;
            overflow: hidden;
            box-shadow: 0 3px 10px rgba(0, 0, 0, 0.03);
            border: 1px solid #f0f0f0;
        }
        
        .table {
            margin-bottom: 0;
        }
        
        .table thead th {
            background-color: #f9f9f9;
            font-weight: 600;
            border-top: none;
            border-bottom: 1px solid #eaeaea !important;
            padding: 12px 15px;
            color: #333;
            text-transform: uppercase;
            font-size: 13px;
        }
        
        .table tbody td {
            vertical-align: middle;
            padding: 14px 15px;
            border-color: #f2f2f2;
            color: #666;
            font-size: 14px;
        }
        
        /* Style cho các nút và badges */
        .success, .danger {
            color: #fff;
            font-size: 12px;
            font-weight: 500;
            padding: 6px 12px;
            border-radius: 20px;
            display: inline-block;
        }
        
        .success {
            background-color: #28a745;
        }
        
        .danger {
            background-color: #dc3545;
        }
        
        /* Style cho buttons trong bảng */
        .table .btn {
            padding: 5px 10px;
            font-size: 12px;
        }
        
        /* Style cho icon actions */
        .table ul {
            margin: 0;
            padding: 0;
            display: flex;
        }
        
        .table ul li {
            display: inline-block;
            margin-right: 10px;
        }
        
        .table ul li:last-child {
            margin-right: 0;
        }
        
        .table ul li a {
            color: #4a5568;
            font-size: 16px;
            transition: all 0.3s;
        }
        
        .table ul li a:hover {
            color: var(--theme-color);
        }
        
        .ri-pencil-line {
            color: #007bff;
        }
        
        .delete-coupon {
            cursor: pointer;
            background: none;
            border: none;
            padding: 0;
            color: #dc3545;
            font-size: 16px;
        }
        
        /* Responsive */
        @media (max-width: 767px) {
            .search-box-filter {
                padding: 15px;
            }
            
            .search-box-filter .form-label {
                margin-bottom: 5px;
            }
            
            .search-box-filter .btn-solid {
                margin-top: 10px;
            }
        }
    </style>

    <!-- App css-->
    <link rel="stylesheet" type="text/css" th:href="@{/templates_storage/assets/css/style.css}">
</head>

<body>
<!-- tap on top start -->
<div class="tap-top">
    <span class="lnr lnr-chevron-up"></span>
</div>
<!-- tap on tap end -->

<!-- page-wrapper Start -->
<div class="page-wrapper compact-wrapper" id="pageWrapper">
    <!-- Bắt đầu tiêu đề trang -->
    <div class="page-header">
        <div class="header-wrapper m-0">
            <div class="header-logo-wrapper p-0">
                <div class="logo-wrapper">
                    <a th:href="@{/warehouse/dashboard/main}">
                        <img class="img-fluid main-logo" th:src="@{/templates_storage/assets/images/logo/1.png}" alt="logo">
                        <img class="img-fluid white-logo" th:src="@{/templates_storage/assets/images/logo/1-white.png}" alt="logo">
                    </a>
                </div>
                <div class="toggle-sidebar">
                    <i class="status_toggle middle sidebar-toggle" data-feather="align-center"></i>
                    <a th:href="@{/warehouse/dashboard/main}">
                        <img th:src="@{/templates_storage/assets/images/logo/1.png}" class="img-fluid" alt="">
                    </a>
                </div>
            </div>

           
            <!-- Tiêu đề mới -->
            <div style="flex: 1; display: flex; justify-content: center;">
                <h1 class="warehouse-logo mb-0">Kho Quản Lý</h1>
            </div>
            <div class="nav-right col-6 pull-right right-header p-0">
                <ul class="nav-menus">
                    <li>
                        <span class="header-search">
                            <i class="ri-search-line"></i>
                        </span>
                    </li>
                    <li class="onhover-dropdown">
                        <div class="notification-box">
                            <i class="ri-notification-line"></i>
                            <span class="badge rounded-pill badge-theme">4</span>
                        </div>
                        <ul class="notification-dropdown onhover-show-div">
                            <li>
                                <i class="ri-notification-line"></i>
                                <h6 class="f-18 mb-0">Thông báo</h6>
                            </li>
                            <li>
                                <p>
                                    <i class="fa fa-circle me-2 font-primary"></i>Đang xử lý giao hàng <span
                                        class="pull-right">10 phút</span>
                                </p>
                            </li>
                            <li>
                                <p>
                                    <i class="fa fa-circle me-2 font-success"></i>Hoàn thành đơn hàng <span
                                        class="pull-right">1 giờ</span>
                                </p>
                            </li>
                            <li>
                                <p>
                                    <i class="fa fa-circle me-2 font-info"></i>Tạo vé hỗ trợ <span
                                        class="pull-right">3 giờ</span>
                                </p>
                            </li>
                            <li>
                                <p>
                                    <i class="fa fa-circle me-2 font-danger"></i>Hoàn thành giao hàng <span
                                        class="pull-right">6 giờ</span>
                                </p>
                            </li>
                            <li>
                                <a class="btn btn-primary" href="#">Xem tất cả thông báo</a>
                            </li>
                        </ul>
                    </li>
                    <li>
                        <div class="mode">
                            <i class="ri-moon-line"></i>
                        </div>
                    </li>
                    <li class="profile-nav onhover-dropdown pe-0 me-0">
                        <div class="media profile-media">
                            <img class="user-profile rounded-circle" th:src="@{${currentUser?.avatar ?: '/templates_storage/assets/images/users/default.jpg'}}" alt="">
                            <div class="user-name-hide media-body">
                                <span th:text="${currentUser?.fullName ?: 'Người dùng'}">Người dùng</span>
                                <p class="mb-0 font-roboto"><span th:text="${currentUser?.roleName ?: 'Người dùng'}">Vai trò</span><i class="middle ri-arrow-down-s-line"></i></p>
                            </div>
                        </div>
                       
                    </li>
                </ul>
            </div>
        </div>
    </div>
    <!-- Kết thúc tiêu đề trang -->


    <!-- Sidebar -->
    <div class="page-body-wrapper">
        <!-- Bắt đầu thanh bên -->
        <div class="sidebar-wrapper">
            <div id="sidebarEffect"></div>
            <div>
                <div class="logo-wrapper logo-wrapper-center">
                    <a th:href="@{/warehouse/dashboard/main}" data-bs-original-title="" title="">
                        <img class="img-fluid for-white" th:src="@{/templates_storage/assets/images/logo/full-white.png}" alt="logo">
                    </a>
                    <div class="back-btn">
                        <i class="fa fa-angle-left"></i>
                    </div>
                    <div class="toggle-sidebar">
                        <i class="ri-apps-line status_toggle middle sidebar-toggle"></i>
                    </div>
                </div>
                <div class="logo-icon-wrapper">
                    <a th:href="@{/warehouse/dashboard/main}">
                        <img class="img-fluid main-logo main-white" th:src="@{/templates_storage/assets/images/logo/1-white.png}" alt="logo">
                        <img class="img-fluid main-logo main-dark" th:src="@{/templates_storage/assets/images/logo/logo-white.png}"
                             alt="logo">
                    </a>
                </div>
                <nav class="sidebar-main">
                    <div class="left-arrow" id="left-arrow">
                        <i data-feather="arrow-left"></i>
                    </div>

                    <div id="sidebar-menu">
                        <ul class="sidebar-links" id="simple-bar">
                            <li class="back-btn"></li>
                            <li class="sidebar-list">
                                <a class="sidebar-link sidebar-title link-nav" th:href="@{/warehouse/dashboard/main}">
                                    <i class="ri-home-line"></i>
                                    <span>Bảng điều khiển</span>
                                </a>
                            </li>
                            <li class="sidebar-list">
                                <a class="linear-icon-link sidebar-link sidebar-title" href="#">
                                    <i class="ri-store-3-line"></i>
                                    <span>Giao dịch</span>
                                </a>
                                <ul class="sidebar-submenu">
                                    <li>
                                        <a th:href="@{/warehouse/stock-in}">Nhập kho</a>
                                    </li>
                                    <li>
                                        <a th:href="@{/warehouse/stock-out}">Xuất kho</a>
                                    </li>
                                </ul>
                            </li>
                            <li class="sidebar-list">
                                <a class="linear-icon-link sidebar-link sidebar-title" href="#">
                                    <i class="ri-list-check-2"></i>
                                    <span>Hóa đơn</span>
                                </a>
                                <ul class="sidebar-submenu">
                                    <li>
                                        <a th:href="@{/warehouse/invoices/in}">Hóa đơn nhập kho</a>
                                    </li>
                                    <li>
                                        <a th:href="@{/warehouse/invoices/out}">Hóa đơn xuất kho</a>
                                    </li>
                                </ul>
                            </li>
                            <li class="sidebar-list">
                                <a class="linear-icon-link sidebar-link sidebar-title" href="#">
                                    <i class="ri-list-settings-line"></i>
                                    <span>Kho hàng</span>
                                </a>
                                <ul class="sidebar-submenu">
                                    <li>
                                        <a th:href="@{/warehouse/medical-equipment}">Thiết bị y tế</a>
                                    </li>
                                    <li>
                                        <a th:href="@{/warehouse/medicines}">Thuốc</a>
                                    </li>
                                </ul>
                            </li>
                            
                            <li class="sidebar-list">
                                <a class="linear-icon-link sidebar-link sidebar-title" href="#">
                                    <i class="ri-price-tag-3-line"></i>
                                    <span>Mã giảm giá</span>
                                </a>
                                <ul class="sidebar-submenu">
                                    <li>
                                        <a th:href="@{/coupon-list}">Danh sách mã giảm giá</a>
                                    </li>
                                    <li>
                                        <a th:href="@{/create-coupon}">Tạo mã giảm giá</a>
                                    </li>
                                </ul>
                            </li>
                            <li class="sidebar-list">
                                <a class="sidebar-link sidebar-title link-nav" th:href="@{/product-review}">
                                    <i class="ri-star-line"></i>
                                    <span>Đánh giá sản phẩm</span>
                                </a>
                            </li>
                            <li class="sidebar-list">
                                <a class="sidebar-link sidebar-title link-nav" th:href="@{/reports}">
                                    <i class="ri-file-chart-line"></i>
                                    <span>Báo cáo</span>
                                </a>
                            </li>
                        </ul>
                    </div>
                    <div class="right-arrow" id="right-arrow">
                        <i data-feather="arrow-right"></i>
                    </div>
                </nav>
            </div>
        </div>
        <!-- Kết thúc thanh bên -->

        <!-- Coupon list table starts-->
        <div class="page-body">
            <div class="container-fluid">
                <div class="row">
                    <div class="col-sm-12">
                        <div class="card card-table">
                            <div class="card-body">
                                <div class="title-header option-title">
                                    <h5>Danh sách mã giảm giá</h5>
                                    <div class="right-options">
                                        <ul>
                                            <li>
                                                <a class="btn btn-solid" th:href="@{/create-coupon}">Thêm mã giảm giá</a>
                                            </li>
                                        </ul>
                                    </div>
                                </div>
                                
                                <!-- Thanh tìm kiếm và bộ lọc -->
                                <div class="search-box-filter mb-4">
                                    <form th:action="@{/coupon-list}" method="get" class="row g-3 align-items-end">
                                        <div class="col-md-4">
                                            <label for="keyword" class="form-label">Tìm kiếm theo tên/mã:</label>
                                            <input type="text" class="form-control" id="keyword" name="keyword" 
                                                   th:value="${keyword}" placeholder="Nhập từ khóa...">
                                        </div>
                                        <div class="col-md-3">
                                            <label for="status" class="form-label">Trạng thái:</label>
                                            <select class="form-select" id="status" name="status">
                                                <option value="">Tất cả</option>
                                                <option value="valid" th:selected="${validFilter != null && validFilter}">Hoạt động</option>
                                                <option value="expired" th:selected="${expiredFilter != null && expiredFilter}">Hết hạn</option>
                                            </select>
                                        </div>
                                        <div class="col-md-3">
                                            <label for="discountType" class="form-label">Kiểu giảm giá:</label>
                                            <select class="form-select" id="discountType" name="discountType">
                                                <option value="">Tất cả</option>
                                                <option value="PERCENTAGE" th:selected="${discountType != null && discountType == 'PERCENTAGE'}">Phần trăm</option>
                                                <option value="FIXED" th:selected="${discountType != null && discountType == 'FIXED'}">Số tiền cố định</option>
                                            </select>
                                        </div>
                                        <div class="col-md-2">
                                            <button type="submit" class="btn btn-solid w-100">Lọc</button>
                                        </div>
                                    </form>
                                </div>
                                <div>
                                        <div class="table-responsive" th:if="${coupons != null and !coupons.isEmpty()}">
                                        <table class="table all-package coupon-list-table table-hover theme-table"
                                            id="table_id">
                                                <thead>
                                                    <tr>
                                                        <th>
                                                            ID
                                                        </th>
                                                    <th>Tiêu đề</th>
                                                    <th>Mã</th>
                                                    <th>Giảm giá</th>
                                                    <th>Trạng thái</th>
                                                    <th>Tùy chọn</th>
                                                    </tr>
                                                </thead>

                                                <tbody>
                                                <tr th:each="coupon : ${coupons}">
                                                    <td th:text="${coupon.id}"></td>
                                                    <td th:text="${coupon.description}"></td>
                                                    <td th:text="${coupon.code}"></td>
                                                    <td class="theme-color" th:text="${coupon.discountType.toString() == 'PERCENTAGE'} ? ${coupon.value + '%'} : ${coupon.value + ' VNĐ'}"></td>
                                                    <td class="menu-status">
                                                        <span th:class="${!coupon.expired ? 'success' : 'danger'}" th:text="${!coupon.expired ? 'Hoạt động' : 'Hết hạn'}"></span>
                                                    </td>
                                                    <td>
                                                        <ul>
                                                            <li>
                                                                <a th:href="@{/edit-coupon/{id}(id=${coupon.id})}">
                                                                    <i class="ri-pencil-line"></i>
                                                                </a>
                                                            </li>

                                                            <li>
<!--                                                                <a href="javascript:void(0)" th:attr="onclick='confirmDelete(' + ${coupon.id} + ')'" data-bs-toggle="modal" data-bs-target="#exampleModalToggle">-->
<!--                                                                    <i class="ri-delete-bin-line"></i>-->
<!--                                                                </a>-->
                                                                <button type="button" th:attr="onclick='showCouponConfirmation(' + ${coupon.id} + ')'" class="delete-coupon">
                                                                    <i class="ri-delete-bin-line"></i>
                                                                </button>
                                                                <div class="coupon-confirmation" th:attr="data-coupon-id=${coupon.id}">
                                                                    <p th:text="'Bạn có chắc chắn muốn xoá mã giảm giá có ID #' + ${coupon.id} + '?'"></p>
                                                                    <button type="button" class="btn btn-light" onclick="hideCouponConfirmation(this)">Cancel</button>
                                                                    <button type="button" class="btn btn-primary" onclick="deleteCoupon(this)">Delete</button>
                                                                </div>
                                                            </li>
                                                        </ul>
                                                    </td>
                                                </tr>
                                            </tbody>
                                        </table>
                                    </div>
                                    <div th:if="${coupons == null or coupons.isEmpty()}" class="text-center">
                                        <p>Không có mã giảm giá nào.</p>
                                    </div>
                                    
                                    <!-- Phân trang -->
                                    <div th:if="${totalPages > 0}" class="pagination-section">
                                        <nav aria-label="Phân trang">
                                            <ul class="pagination">
                                                <!-- Nút về trang đầu -->
                                                <li class="page-item" th:classappend="${currentPage == 0} ? 'disabled'">
                                                    <a class="page-link" th:href="@{/coupon-list(page=0, size=${size}, keyword=${keyword != null ? keyword : ''}, status=${param.status != null ? param.status[0] : ''}, discountType=${param.discountType != null ? param.discountType[0] : ''}, sortBy=${sortBy}, sortDir=${sortDir})}" aria-label="Trang đầu">
                                                        <span aria-hidden="true">&laquo;</span>
                                                    </a>
                                                </li>
                                                
                                                <!-- Nút lùi một trang -->
                                                <li class="page-item" th:classappend="${currentPage == 0} ? 'disabled'">
                                                    <a class="page-link" th:href="@{/coupon-list(page=${currentPage - 1}, size=${size}, keyword=${keyword != null ? keyword : ''}, status=${param.status != null ? param.status[0] : ''}, discountType=${param.discountType != null ? param.discountType[0] : ''}, sortBy=${sortBy}, sortDir=${sortDir})}" aria-label="Trang trước">
                                                        <span aria-hidden="true">&lsaquo;</span>
                                                    </a>
                                                </li>
                                                
                                                <!-- Hiển thị các trang -->
                                                <th:block th:with="start=${currentPage > 2 ? currentPage - 2 : 0}, 
                                                              end=${currentPage + 2 < totalPages ? currentPage + 2 : totalPages - 1}">
                                                    
                                                    <!-- Trang đầu + dấu ... nếu không phải ở gần trang đầu -->
                                                    <th:block th:if="${start > 0}">
                                                        <li class="page-item">
                                                            <a class="page-link" th:href="@{/coupon-list(page=0, size=${size}, keyword=${keyword != null ? keyword : ''}, status=${param.status != null ? param.status[0] : ''}, discountType=${param.discountType != null ? param.discountType[0] : ''}, sortBy=${sortBy}, sortDir=${sortDir})}">1</a>
                                                        </li>
                                                        <li class="page-item disabled" th:if="${start > 1}">
                                                            <span class="page-link">...</span>
                                                        </li>
                                                    </th:block>
                                                    
                                                    <!-- Trang hiện tại và lân cận -->
                                                    <li class="page-item" th:each="i : ${#numbers.sequence(start, end)}" 
                                                        th:classappend="${i == currentPage} ? 'active'">
                                                        <a class="page-link" th:href="@{/coupon-list(page=${i}, size=${size}, keyword=${keyword != null ? keyword : ''}, status=${param.status != null ? param.status[0] : ''}, discountType=${param.discountType != null ? param.discountType[0] : ''}, sortBy=${sortBy}, sortDir=${sortDir})}" 
                                                           th:text="${i + 1}"></a>
                                                    </li>
                                                    
                                                    <!-- Dấu ... và trang cuối nếu không phải ở gần trang cuối -->
                                                    <th:block th:if="${end < totalPages - 1}">
                                                        <li class="page-item disabled" th:if="${end < totalPages - 2}">
                                                            <span class="page-link">...</span>
                                                        </li>
                                                        <li class="page-item">
                                                            <a class="page-link" th:href="@{/coupon-list(page=${totalPages - 1}, size=${size}, keyword=${keyword != null ? keyword : ''}, status=${param.status != null ? param.status[0] : ''}, discountType=${param.discountType != null ? param.discountType[0] : ''}, sortBy=${sortBy}, sortDir=${sortDir})}" 
                                                               th:text="${totalPages}"></a>
                                                        </li>
                                                    </th:block>
                                                </th:block>
                                                
                                                <!-- Nút tiến một trang -->
                                                <li class="page-item" th:classappend="${currentPage >= totalPages - 1} ? 'disabled'">
                                                    <a class="page-link" th:href="@{/coupon-list(page=${currentPage + 1}, size=${size}, keyword=${keyword != null ? keyword : ''}, status=${param.status != null ? param.status[0] : ''}, discountType=${param.discountType != null ? param.discountType[0] : ''}, sortBy=${sortBy}, sortDir=${sortDir})}" aria-label="Trang sau">
                                                        <span aria-hidden="true">&rsaquo;</span>
                                                    </a>
                                                </li>
                                                
                                                <!-- Nút đến trang cuối -->
                                                <li class="page-item" th:classappend="${currentPage >= totalPages - 1} ? 'disabled'">
                                                    <a class="page-link" th:href="@{/coupon-list(page=${totalPages - 1}, size=${size}, keyword=${keyword != null ? keyword : ''}, status=${param.status != null ? param.status[0] : ''}, discountType=${param.discountType != null ? param.discountType[0] : ''}, sortBy=${sortBy}, sortDir=${sortDir})}" aria-label="Trang cuối">
                                                        <span aria-hidden="true">&raquo;</span>
                                                    </a>
                                                </li>
                                            </ul>
                                        </nav>
                                    </div>
                                </div>
                            </div>
                            <!-- Pagination End -->
                        </div>
                    </div>
                </div>
            </div>
            <!-- Container-fluid Ends-->

            <!-- footer start-->
            <div class="container-fluid">
                <footer class="footer">
                    <div class="row">
                        <div class="col-md-12 footer-copyright text-center">
                            <p class="mb-0">Copyright 2022 &copy; Kivicare theme by pixelstrap</p>
                        </div>
                    </div>
                </footer>
            </div>
        </div>
        <!-- footer end-->
    </div>

    <!-- Modal Start -->
<!--    <div class="modal fade" id="staticBackdrop" data-bs-backdrop="static" data-bs-keyboard="false" tabindex="-1">-->
<!--        <div class="modal-dialog  modal-dialog-centered">-->
<!--            <div class="modal-content">-->
<!--                <div class="modal-body">-->
<!--                    <h5 class="modal-title" id="staticBackdropLabel">Logging Out</h5>-->
<!--                    <p>Are you sure you want to log out?</p>-->
<!--                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>-->
<!--                    <div class="button-box">-->
<!--                        <button type="button" class="btn btn&#45;&#45;no" data-bs-dismiss="modal">No</button>-->
<!--                        <button type="button" onclick="location.href = 'login.html';"-->
<!--                                class="btn  btn&#45;&#45;yes btn-primary">Yes</button>-->
<!--                    </div>-->
<!--                </div>-->
<!--            </div>-->
<!--        </div>-->
<!--    </div>-->

    <div class="logout-confirmation">
        <p>Are you sure you want to log out?</p>
        <button type="button" class="btn btn--no" onclick="hideConfirmation()">No</button>
        <button type="button" class="btn btn--yes btn-primary" onclick="location.href = 'login.html'; hideConfirmation()">Yes</button>
    </div>
    <!-- Modal End -->
</div>
<!-- page-wrapper End -->

<!-- Delete Modal Box Start -->
<!--<div class="modal fade theme-modal remove-coupon" id="exampleModalToggle" aria-hidden="true" tabindex="-1">-->
<!--    <div class="modal-dialog modal-dialog-centered">-->
<!--        <div class="modal-content">-->
<!--            <div class="modal-header d-block text-center pb-3 border-bottom-0">-->
<!--                <h5 class="modal-title w-100" id="exampleModalLabel22">Xác nhận xóa</h5>-->
<!--                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>-->
<!--            </div>-->
<!--            <div class="modal-body">-->
<!--                <div class="remove-box text-center">-->
<!--                    <i class="ri-delete-bin-line"></i>-->
<!--                    <h2 class="mt-2">Xóa mã giảm giá</h2>-->
<!--                    <p>Bạn có chắc chắn muốn xóa mã giảm giá này không?</p>-->
<!--                </div>-->
<!--            </div>-->
<!--            <div class="modal-footer border-top-0 justify-content-center">-->
<!--                <button type="button" class="btn btn-light" data-bs-dismiss="modal">Hủy</button>-->
<!--                <button type="button" class="btn btn-primary" onclick="deleteCoupon()">Xóa</button>-->
<!--                <input type="hidden" id="deleteCouponId">-->
<!--            </div>-->
<!--        </div>-->
<!--    </div>-->
<!--</div>-->
<!--<div class="coupon-confirmation" data-coupon-id="123">-->
<!--    <p>Are you sure you want to delete coupon #123?</p>-->
<!--    <button type="button" class="btn btn-light" onclick="hideCouponConfirmation(this)">Cancel</button>-->
<!--    <button type="button" class="btn btn-primary" onclick="deleteCoupon(this)">Delete</button>-->
<!--</div>-->

<div class="modal fade theme-modal remove-coupon" id="exampleModalToggle2" aria-hidden="true" tabindex="-1">
    <div class="modal-dialog modal-dialog-centered">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title text-center" id="exampleModalLabel12">Done!</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="modal-body">
                <div class="remove-box text-center">
                    <div class="wrapper">
                        <svg class="checkmark" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 52 52">
                            <circle class="checkmark__circle" cx="26" cy="26" r="25" fill="none" />
                            <path class="checkmark__check" fill="none" d="M14.1 27.2l7.1 7.2 16.7-16.8" />
                        </svg>
                    </div>
                    <h4 class="text-content">It's Removed.</h4>
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn btn-primary" data-bs-toggle="modal" data-bs-dismiss="modal">Close</button>
            </div>
        </div>
    </div>
</div>
<!-- Delete Modal Box End -->

<!-- Script để xử lý modal xóa -->
<script>
    function confirmDelete(id) {
        $('#deleteCouponId').val(id);
    }

    // function deleteCoupon() {
    //     var id = $('#deleteCouponId').val();
    //     $.ajax({
    //         url: '/coupon-delete/' + id,
    //         type: 'DELETE',
    //         success: function(result) {
    //             if (result.success) {
    //                 location.reload();
    //             } else {
    //                 alert('Xóa thất bại: ' + result.message);
    //             }
    //         },
    //         error: function(xhr) {
    //             alert('Lỗi khi xóa mã giảm giá.');
    //         }
    //     });
    // }

    function showConfirmation() {
        document.querySelector('.logout-confirmation').classList.add('show');
    }
    function hideConfirmation() {
        document.querySelector('.logout-confirmation').classList.remove('show');
    }

    function showCouponConfirmation(couponId) {
        const confirmation = document.querySelector(`.coupon-confirmation[data-coupon-id="${couponId}"]`);
        if (confirmation) {
            confirmation.classList.add('show');
        }
    }
    function hideCouponConfirmation(button) {
        button.closest('.coupon-confirmation').classList.remove('show');
    }
    function deleteCoupon(button) {
        const couponId = button.closest('.coupon-confirmation').getAttribute('data-coupon-id');
        console.log('Deleting coupon with ID:', couponId);
        // Add deletion logic (e.g., AJAX request)
        $.ajax({
            url: '/coupon-delete/' + couponId,
            type: 'POST',
            dataType: 'json',
            success: function(result) {
                if (result.success) {
                    location.reload();
                } else {
                    alert('Xóa thất bại: ' + result.message);
                }
            },
            error: function(xhr) {
                alert('Lỗi khi xóa mã giảm giá.');
            }
        });
        hideCouponConfirmation(button);
    }
</script>

<!-- latest js -->
<script th:src="@{/templates_storage/assets/js/jquery-3.6.0.min.js}"></script>

<!-- Bootstrap js -->
<script th:src="@{/templates_storage/assets/js/bootstrap/bootstrap.bundle.min.js}"></script>

<!-- feather icon js -->
<script th:src="@{/templates_storage/assets/js/icons/feather-icon/feather.min.js}"></script>
<script th:src="@{/templates_storage/assets/js/icons/feather-icon/feather-icon.js}"></script>

<!-- scrollbar simplebar js -->
<script th:src="@{/templates_storage/assets/js/scrollbar/simplebar.js}"></script>
<script th:src="@{/templates_storage/assets/js/scrollbar/custom.js}"></script>

<!-- customizer js -->
<script th:src="@{/templates_storage/assets/js/customizer.js}"></script>

<!-- Sidebar js -->
<script th:src="@{/templates_storage/assets/js/config.js}"></script>

<!-- Plugins JS -->
<script th:src="@{/templates_storage/assets/js/sidebar-menu.js}"></script>
<script th:src="@{/templates_storage/assets/js/notify/bootstrap-notify.min.js}"></script>
<script th:src="@{/templates_storage/assets/js/notify/index.js}"></script>

<!-- Data table js -->
<script th:src="@{/templates_storage/assets/js/jquery.dataTables.js}"></script>
<script th:src="@{/templates_storage/assets/js/custom-data-table.js}"></script>

<!-- all checkbox select js -->
<script th:src="@{/templates_storage/assets/js/checkbox-all-check.js}"></script>

<!-- sidebar effect -->
<script th:src="@{/templates_storage/assets/js/sidebareffect.js}"></script>

<!-- Theme js -->
<script th:src="@{/templates_storage/assets/js/script.js}"></script>
</body>

</html>
